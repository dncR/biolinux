services:
  bio-linux-ubuntu:
    image: dncr/bio-linux:ubuntu-${ARCH}
    build:
      context: ../
      dockerfile: dockerfiles/bio-linux.Dockerfile
      args:
        - LANG=${LANG_SET}
        - ARCH=${ARCH}
        - DOCKER_IMAGE=dncr/rstudio-server:4.3.3-arm64-jammy
    # Define container name before building it.
    container_name: biolinux-ubuntu
    # set restart policy for the container
    restart: "unless-stopped"
    # Setting this to something other than 'root' will cause shiny apps not to
    # run on the localhost:80 "Welcome to Shiny" diagnostics page mentioned
    # below.
    tty: true
    stdin_open: true
    user: 'root'
    environment:
      - PASSWORD=rstudio**
    ports:
      - "8004:8787"
    volumes:
      # Set external volumes.
      # User-specific container (external volume). Files in this folder will be stored as an external volume
      # out of docker container. If docker container was removed, external files will be remained in the main 
      # computer. Multiple volumes can be defined.
      - /Users/dncr:/home/rstudio/externalvolume
    #deploy:
    #  resources:
    #    limits:
    #      cpus: "1.0"  # Set the fraction of CPU cores (0.5 means half of a core)
    #      memory: 32G  # Set the memory limit (e.g., 512 megabytes)
    #networks:
    #  - rstudio-network-4.2.1

